# Maintainer: Herry <herry.herry@glasgow.ac.uk>
pkgname=fruit-base
pkgver=0.0.4
pkgrel=0
pkgdesc="Meta package for Fruit Operating System"
url="https://fruit-testbed.org"
arch="noarch"
license="BSD"
makedepends=""

depends="alpine-baselayout alpine-conf alpine-keys
apk-tools busybox busybox-initscripts busybox-suid libc-utils
openrc mkinitfs openssh openssh-server tzdata kbd-bkeymaps
bash python e2fsprogs btrfs-progs nfs-utils curl parted
wireless-tools wpa_supplicant dnsmasq
docker singularity"

depends_dev=""
install=""
subpackages=""
source=""
options="!check"

package() {
	mkdir -p "$pkgdir"/etc

	# create /etc/motd
	cat >"$pkgdir"/etc/issue<<EOF
FruitOS ${pkgver}

EOF

	# create /etc/issue
	cat >"$pkgdir"/etc/issue<<EOF
FruitOS ${pkgver} - Kernel \\r on an \\m (\\l)

EOF

	# create /etc/os-release
	cat >"$pkgdir"/etc/os-release<<EOF
NAME="FruitOS"
ID=fruitos
VERSION=$pkgver
PRETTY_NAME="FruitOS v${pkgver}"
HOME_URL="https://fruit-testbed.org"
EOF
}
