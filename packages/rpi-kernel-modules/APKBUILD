# Contributor: "Herry <herry.herry@glasgow.ac.uk>"
# Maintainer: "Herry <herry.herry@glasgow.ac.uk>"
pkgname=rpi-kernel-modules
pkgver=1.20170811
pkgrel=0
pkgdesc="RaspberryPi Linux Kernel Modules"
url="https://github.com/raspberrypi/firmware"
arch="armhf"
license="GPL"
depends=""
depends_dev=""
makedepends="$depends_dev"
install=""
subpackages=""
source="firmware-${pkgver}.zip::https://github.com/raspberrypi/firmware/archive/1.20170811.zip"
builddir="$srcdir/firmware-${pkgver}"
options="!strip suid !check"

prepare() {
	default_prepare
}

build() {
	return 0
}

package() {
	mkdir -p ${pkgdir}/lib/modules/
	dirs=$(ls ${builddir}/modules/ | grep -v '\-v7+')
	for dir in $dirs; do
		cp -rf ${builddir}/modules/${dir} ${pkgdir}/lib/modules/
	done
}	
sha512sums="9091b5d2fa625b49486c143eddefbd6dc3753e4bcea69827f4eefa76ab91a86d56b2a8ea05a2322b077d69e0b211b16bfd5e464fe56bbee9e3cacf6c7cca3c22  firmware-1.20170811.zip"
