# Contributor:
# Maintainer: Wajdi Hajji <w.hajji@lboro.ac.uk>
pkgname=k8s
pkgver="v1.8.3"
pkgrel=0
pkgdesc="Kubernetes kubeadm"
url="https://kubernetes.io/"
arch="armhf"
license="Apache License 2.0"
depends="ebtables ethtool socat libc6-compat"
makedepends=""
install=""
subpackages=""
source="
        kubeadm::https://storage.googleapis.com/kubernetes-release/release/${pkgver}/bin/linux/arm/kubeadm
        kubelet::https://storage.googleapis.com/kubernetes-release/release/${pkgver}/bin/linux/arm/kubelet
        kubectl::https://storage.googleapis.com/kubernetes-release/release/${pkgver}/bin/linux/arm/kubectl
        kubelet.initd
        kubelet.confd
        "
builddir="$srcdir/"
options="!check"

build() {
        return 0
}

package() {

        install -m755 -D "$srcdir"/kubelet.initd \
                "$pkgdir"/etc/init.d/kubelet
        install -m644 -D "$srcdir"/kubelet.confd \
                "$pkgdir"/etc/conf.d/kubelet

        mkdir -p "$pkgdir"/usr/k8s/bin
        cp "$srcdir"/kube* "$pkgdir"/usr/k8s/bin
        chmod +x "$pkgdir"/usr/k8s/bin/kube*
        return 0
}
sha512sums="4a441a62ec3a5d4c3865d6fb15c3f718247fb1beacea8edb3c698a4b57fe81060ee7032357b9be73a43a4becf8a8c6c246bf7ae57893aa8ff74b5883cc34eeae  kubeadm
1347a9c61299d43cd8a2c04df23c5bd881f319f4995e54cb4514356795b0e10ac7501621087a9adad61ee0e170f74f2b9241f73b1bb6dde71421504349a2df5b  kubelet
60983f126bfb51d381629a71ab46c365b2a8c7ddc9f6a13155206c16b2dfa15d2141e2b0bb29a0f600f70f9f9b7d2245e2ff4bdf34c7991e0590432918b7f31e  kubectl
ad730529b9886f320e068f947490e890b4de3cf5df90f87710ae5b70cabdf692ad77879ddb4eafdb3d3f33b6ac06743236087fa2c78ba46c95cc85c49b804a00  kubelet.initd
1f9abc6623a59528e86d1c551d24c540b0204e4575dd47072f13f615823f4cd20cdd6a03e0a08981ec56c4300af55b07390d7994788d880f98f689492a82a536  kubelet.confd"
